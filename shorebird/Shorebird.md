# by Hanna Hamdy

في العادة لما بنكون شغالين على تطبيق موبايل ونعوز نعمل تعديل  حتى لو التعديل بسيط  بنضطر نعيد **بناء التطبيق (Build)** بالكامل وبعد كده نرفعه تاني على المتجر (Google Play أو App Store)، ونستنى مراجعة المتجر عشان المستخدم يظهرله التحديث.

العملية دي ممكن تاخد وقت فده ممكن يعطلنا لو محتاجين نصلح حاجة بسرعة.

وهنا بييجي دور أداة **Shorebird** اللي بتسهل عملية التحديث عن طريق إرسال التعديلات مباشرة للمستخدمين بدون الحاجة لإعادة رفع التطبيق على المتجر  ويظهر التعديل بمجرد اعاده تشغيل التطبيق.

#  Shorebird 
شوربيرد كأنه سيرفر بتربط بينه وبين مشروعك، وكل ما تعمل تعديل أو تحديث في التطبيق، تقدر تبعته على السيرفر ده بعد ما تعمله build.
بعد كده، أول ما المستخدم يفتح التطبيق على موبايله، بيبعت طلب بسيط (http request) فيه شوية معلومات زي رقم النسخة ونوع الجهاز،ورقم ال patch.
ولو لقى إن في تحديث جديد، التطبيق بينزله لوحده وبيطبقه في الخلفية، من غير ما تضطر ترفع النسخة الجديدة على المتجر.


## 🔧 خطوات التثبيت

### 1. تثبيت Shorebird CLI:
أول حاجة، هنفتح التيرمينال ونكتب الأمر ده علشان ننزل أداة Shorebird CLI
الأمر ده بينزل ويشغّل سكربت التثبيت تلقائي، علشان نقدر نستخدم أوامر Shorebird بعد كده ونتعامل مع ال shorebird server.

<pre>curl --proto '=https' --tlsv1.2 https://raw.githubusercontent.com/shorebirdtech/install/main/install.sh -sSf | bash)</pre>

بعد ما التثبيت يخلص، لازم نضيف مسار ملف bin للـ PATH في الجهاز، علشان نقدر نشغل أوامر Shorebird من أي مكان:

🖥️ على Mac:
نفتح ملف .zshrc  ونضيف السطر ده
export PATH="$HOME/.shorebird/bin:$PATH"
🪟 على Windows:
نروح على Environment Variables

نختار ال Path

نضغط New

ونضيف المسار ده:
C:\Users\<اسم_المستخدم>\.shorebird\bin)




## 2. 🩺 -  نتأكد إن كل حاجة شغالة  تمام والshorebird ClI اتثبت بشكل صحيح: 
هنكتب الأمر ده في التيرمينال
<pre>  shorebird doctor  </pre>
الأمر ده هيعمل فحص سريع ويقولك لو في حاجة ناقصة أو مش مزبوطة علشان تصلحها قبل ما تكمل.







## 3. 🔑 تسجيل الدخول إلى Shorebird

علشان نقدر نربط المشروع بالسيرفر ونبعت التحديثات، لازم نسجّل دخولنا على حساب Shorebird.
 هنكتب الامر ده في التيرمنال
<pre>  shorebird login </pre>
بعد كده هيظهرلك لينك هنفتحه في المتصفح ونختار الحساب الي محتاجين ندخل بيه في حساب ال shorebird server علشان نسجل التطبيق عليه .




## 4. 🛠️ نجهّز المشروع علشان يستقبل التحديثات
دلوقتي هنربط المشروع بتاعنا بـ Shorebird لأول مرة.
هنكتب الامر ده في التيرمينال
<pre> shorebird init </pre>

هيطلب منك تكتب اسم المشروع اللي هيتسجل بيه على السيرفر، أو تقدر تضغط Enter لو عايز تسجله بنفس اسم المشروع الحالي.

هيتم إنشاء ملف اسمه shorebird.yaml والملف ده بيحتوي على معلومات تعريفية للتطبيق زي ال application-id وده بيستخدمه السيرفر علشان يربط التحديثات بتطبيقك ويبقي عارف هيبعت التحديثات بعد كده  دي لاي تطبيق.

كمان فيه كي اسمه auto_update، ده بيحدد إذا كانت التحديثات هتتثبت تلقائي ولا لأ، يعني لو فيه تحديثات موجوده علي السيرفر غير الي موجوده حاليا يثبتها والا لا لما اعمل اعاده تشغيل للتطبيق وقيمته الافتراضيه true، يعني أي تحديث جديد هيتثبت تلقائي من غير ما المستخدم يعمل حاجة.
وبكده يكون المشروع اتربط بالسيرفر وجاهز يستقبل التحديثات.




## 5. 🚀 رفع نسخه جديده

لرفع نسخة جديدة من التطبيق  على سيرفر Shorebird هنكتب الامر ده.

<pre> shorebird release android </pre>

بعد ما تشغل الأمر، هيتبني ملف الـ app bundle في فولدر الـ build ، وبعدين بيرفعه للسيرفر.

النسخة دي هي اللي هتستخدم لإرسال التحديثات للمستخدمين، والتحديث هيظهر لهم لما يعيدوا تشغيل التطبيق.


## 6. 👀 تجربة النسخة قبل النشر(الخطوه دي اختياريه لو عايزين نشوف النسخه قبل ما نرفعها علي store)

 الامر دهبيعمل fetch لكل النسخ المرتبطه بالمشروع الحالي علي Shorebird server ونختار النسخه الي محتاجين نعملها تثبيت  علي الجهاز المتصل باللاب. 
 <pre> shorebird preview </pre>



## 7. 🚀 إنشاء Patch (إرسال تحديث)
نقدر نعدل في الكود ((Only Dart Code))ونبعت التعديل ده ل shorebird server من خلال هذا الامر ( shorebird patch + platform)

الأمر ده بيبعت تحديث صغير خاص بأجهزة أندرويد، بيحتوي بس على التغييرات الأخيرة اللي عملناها.

<pre> shorebird patch android </pre>


المستخدمين اللي عندهم التطبيق مثبت هيوصلهم التحديث ده لما يعيدوا تشغيل التطبيق،  عن طريق ان التطبيق يبعت http request  الي shorebird server علشان يتاكد فيه تحديث موجود غير النسخه الحاليه والا لا لو موجود نسخه احدث بيتم تثبيت الجزء اللي اتغير بس  في الخلفيه مش  تثبيت للتطبيق كامل، 



✅ إيه اللي ممكن نعدله عن طريق Shorebird:

✅ تعديلات في الواجهات المبنية بلغة Dart.

✅ أي تغييرات في منطق التطبيق (Business Logic)



❌ إيه اللي ما ينفعش نعدله عن طريق Shorebird:

❌ إضافة أو إزالة أذونات (Permissions) في info.split/AndroidManifest.xml

❌ تعديل أو إضافة Native Plugins

❌ تغيير الـ Launch Icon

❌ تغيير اسم التطبيق أو الـ Package Name.


لو عدلنا في حاجه منهم لما نيجي نعمل patch بيظهر لنا warning ان التحديثات دي الshorebird مش بتدعمها ومبتترفعش للسيرفر
لو حبينا نعدل في الحاجات دي، لازم نرجع نرفع تحديث جديد كامل من خلال المتجر.

























